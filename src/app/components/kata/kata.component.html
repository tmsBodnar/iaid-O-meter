<div class="kata-wrapper">
    <div>
        <mat-expansion-panel *ngFor="let kata of katas; let i = index; trackBy: TrackByKataUid">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{kata.name}}
                
              </mat-panel-title>
              <mat-panel-description>
                {{kata.number}} / {{kata.ryuha}}
              </mat-panel-description>
            </mat-expansion-panel-header>    
            <mat-card>
              <mat-card-header>
                <mat-card-title>
                  <div class="flex-title">
                  {{kata.name}}
                    <button mat-icon-button color='primary' style="margin-left: auto;" (click)="onEditKataClicked(kata)">
                      <mat-icon>edit</mat-icon>
                    </button>
                  </div>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <p>
                  {{kata.description}}
                </p>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Jakukantes:
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                      <mat-expansion-panel hideToggle [disabled]="clickButton" (click)="clickButton=false"
                        *ngFor="let jakukante of kata.jakukantes; let i = index; trackBy: TrackByJakukanteUid">
                        <mat-expansion-panel-header>
                          <mat-panel-description>
                            {{jakukante.name}}
                          </mat-panel-description>
                          <button mat-icon-button color='primary' style="margin-left: auto;" (click)="onEditJakukanteClicked(jakukante)">
                            <mat-icon>edit</mat-icon>
                          </button>
                        </mat-expansion-panel-header>
                        <p>
                          {{jakukante.description}}
                        </p>
                        <div class="flex-title">
                          Technics:
                          <button mat-icon-button color='primary' style="margin-left: auto;" (click)="onNewTechnicClicked()">
                            <mat-icon>add</mat-icon>
                          </button>
                        </div>
                        <mat-list *ngFor="let technic of jakukante.technics; let i = index; trackBy: TrackByTechnicUid">
                          <mat-list-item>{{technic.description}}</mat-list-item>
                        </mat-list>
                      </mat-expansion-panel>
                </mat-expansion-panel>
              </mat-card-content>
            </mat-card>    
          </mat-expansion-panel>
    </div>

    <div class="new-btn">
        <button mat-raised-button color='primary' (click)="onPlusKataClicked()">
            <mat-icon style="margin: 5px;">add_circle</mat-icon>
            <span>Add new kata</span>
        </button>
    </div>
</div>
